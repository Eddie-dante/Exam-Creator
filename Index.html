<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kenyan Curriculum Exam Generator</title>
  <style>
    :root {
      --primary-color: #007BFF;
      --text-color: #333;
      --bg-color: #f4f4f4;
      --card-bg: #ffffff;
      --border-color: #dee2e6;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-color);
      margin: 0;
      padding: 0;
      color: var(--text-color);
    }

    .app-header {
      background-color: var(--primary-color);
      color: white;
      text-align: center;
      padding: 2rem 1rem;
    }

    .app-container {
      max-width: 900px;
      margin: 2rem auto;
      padding: 2rem;
      background-color: var(--card-bg);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    .controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .input-group {
      display: flex;
      flex-direction: column;
    }

    label {
      font-weight: 600;
      margin-bottom: 0.5rem;
      font-size: 16px;
    }

    select, input {
      padding: 0.75rem;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      font-size: 1rem;
    }

    #generate-btn, #print-btn, #toggle-answer-key {
      grid-column: 1 / -1;
      padding: 0.75rem 1.5rem;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
      transition: background-color 0.3s ease;
      margin-top: 10px;
    }

    #generate-btn:hover, #print-btn:hover, #toggle-answer-key:hover {
      background-color: #0056b3;
    }

    #topics {
      background-color: var(--card-bg);
      padding: 15px;
      border-radius: 6px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin-top: 20px;
      font-size: 15px;
    }

    .exam-document {
      padding: 1rem;
    }

    .exam-header {
      text-align: center;
      margin-bottom: 2rem;
      border-bottom: 2px solid var(--border-color);
      padding-bottom: 1rem;
    }

    .exam-header h2 {
      margin-top: 0;
      color: var(--primary-color);
    }

    .question {
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px dashed var(--border-color);
    }

    .question p {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }

    .options {
      margin-left: 20px;
    }

    .error-message {
      text-align: center;
      color: red;
      font-weight: bold;
      margin-top: 20px;
    }

    .answer-key {
      margin-top: 2rem;
      background: #f1f1f1;
      padding: 1rem;
      border-radius: 8px;
    }

    .answer-key h3 {
      color: var(--primary-color);
    }

    .answer-key ol {
      padding-left: 1.2rem;
    }

    @media print {
      .app-header, .controls, .app-footer, #generate-btn, #print-btn, #toggle-answer-key, #topics {
        display: none;
      }

      .app-container {
        box-shadow: none;
        padding: 0;
        margin: 0;
        max-width: 100%;
      }

      .exam-document {
        padding: 1cm;
      }

      .exam-header {
        border-bottom: 2px solid #000;
        padding-bottom: 10px;
      }
    }
  </style>
</head>
<body>
  <header class="app-header">
    <h1>Kenyan Curriculum Exam Generator</h1>
    <p>Explore subjects and topics or generate an exam for Forms 1â€“4.</p>
  </header>

  <main class="app-container">
    <section class="controls">
      <div class="input-group">
        <label for="formSelect">Select Form:</label>
        <select id="formSelect" required>
          <option value="" disabled selected>Select Form</option>
          <option value="form1">Form 1</option>
          <option value="form2">Form 2</option>
          <option value="form3">Form 3</option>
          <option value="form4">Form 4</option>
        </select>
      </div>

      <div class="input-group">
        <label for="subjectSelect">Select Subject:</label>
        <select id="subjectSelect" required>
          <option value="" disabled selected>Select Subject</option>
        </select>
      </div>

      <div class="input-group">
        <label for="topicSelect">Select Topic:</label>
        <select id="topicSelect" required>
          <option value="" disabled selected>Select Topic</option>
        </select>
      </div>

      <div class="input-group">
        <label for="num-questions">Number of Questions:</label>
        <input type="number" id="num-questions" min="1" max="100" value="10" required>
      </div>

      <button id="generate-btn">Generate Exam</button>
      <button id="print-btn">Print Exam</button>
      <button id="toggle-answer-key">Show Answer Key</button>
    </section>

    <section id="topics"></section>
    <section class="exam-container" id="exam-container"></section>
  </main>

  <footer class="app-footer">
    <p>&copy; 2025 Kenyan Curriculum Exam Generator</p>
  </footer>

  <script>
    const syllabus = {
      form1: {
        "Mathematics": ["Numbers", "Algebra", "Geometry", "Commercial Arithmetic", "Measurement", "Statistics"],
        "English": ["Functional Writing", "Comprehension", "Grammar", "Literature", "Oral Skills"],
        "Kiswahili": ["Lugha", "Fasihi", "Insha", "Isimu Jamii"],
        "Biology": ["Introduction to Biology", "Classification", "Cell Biology", "Nutrition"],
        "Chemistry": ["Introduction to Chemistry", "Structure of Matter", "Chemical Reactions"],
        "Physics": ["Introduction to Physics", "Mechanics", "Thermal Physics"],
        "Geography": ["Introduction to Geography", "Physical Geography", "Map Work"],
        "History and Government": ["Introduction to History", "World History", "Kenyan History"],
        "Religious Education": ["Old Testament / Quran / Vedas", "Beliefs and Values", "Religious Practices"],
        "Business Studies": ["Business Environment", "Entrepreneurship"],
        "Agriculture": ["Introduction to Agriculture", "Crop Production", "Soil Science"],
        "Computer Studies": ["Introduction to Computers", "Operating Systems"],
        "Home Science": ["Nutrition and Dietetics", "Clothing and Textiles"],
        "Art and Design": ["Drawing and Painting", "Art History"],
        "Music": ["Music Theory", "Performance"],
        "French": ["Basic Vocabulary", "Grammar", "Listening and Speaking"],
        "German": ["Basic Vocabulary", "Grammar", "Listening and Speaking"],
        "Arabic": ["Basic Vocabulary", "Grammar", "Listening and Speaking"],
        "Hindi": ["Basic Vocabulary", "Grammar", "Listening and Speaking"]
      },
      form2: {
        "Mathematics": ["Algebra", "Geometry", "Trigonometry", "Commercial Arithmetic", "Statistics"],
        "English": ["Functional Writing", "Comprehension", "Grammar", "Literature", "Oral Skills"],
        "Kiswahili": ["Lugha", "Fasihi", "Insha", "Isimu Jamii"],
        "Biology": ["Transport", "Respiration", "Excretion"],
        "Chemistry": ["Acids, Bases, and Salts", "Periodic Table"],
        "Physics": ["Mechanics", "Waves", "Electricity"],
        "Geography": ["Physical Geography", "Human Geography", "Map Work"],
        "History and Government": ["World History", "African History", "Kenyan History"],
        "Religious Education": ["Old Testament / Quran / Vedas", "Moral Teachings", "Religious Practices"],
        "Business Studies": ["Financial Accounts", "Marketing"],
        "Agriculture": ["Livestock Production", "Soil Science"],
        "Computer Studies": ["Application Software", "Networking"],
        "Home Science": ["Home Management", "Consumer Education"],
        "Art and Design": ["Sculpture", "Graphic Design"],
        "Music": ["Music Theory", "Music History"],
        "French": ["Grammar", "Reading", "Writing"],
        "German": ["Grammar", "Reading", "Writing"],
        "Arabic": ["Grammar", "Reading", "Writing"],
        "Hindi": ["Grammar", "Reading", "Writing"]
      },
      form3: {
        "Mathematics": ["Algebra", "Geometry", "Trigonometry", "Probability", "Calculus"],
        "English": ["Functional Writing", "Comprehension", "Grammar", "Literature", "Oral Skills"],
        "Kiswahili": ["Lugha", "Fasihi", "Insha", "Isimu Jamii"],
        "Biology": ["Reproduction", "Ecology"],
        "Chemistry": ["Organic Chemistry", "Metals and Non-Metals"],
        "Physics": ["Electricity and Magnetism", "Optics"],
        "Geography": ["Human Geography", "Fieldwork", "Map Work"],
        "History and Government": ["African History", "Kenyan History", "Government"],
        "Religious Education": ["New Testament / Hadith / Upanishads", "Contemporary Issues"],
        "Business Studies": ["Production", "Financial Accounts"],
        "Agriculture": ["Farm Management", "Agricultural Economics"],
        "Computer Studies": ["Networking", "Programming"],
        "Home Science": ["Nutrition and Dietetics", "Clothing and Textiles"],
        "Art and Design": ["Drawing and Painting", "Graphic Design"],
        "Music": ["Performance", "Composition"],
        "French": ["Advanced Grammar", "Literature", "Composition"],
        "German": ["Advanced Grammar", "Literature", "Composition"],
        "Arabic": ["Advanced Grammar", "Literature", "Composition"],
        "Hindi": ["Advanced Grammar", "Literature", "Composition"]
      },
      form4: {
        "Mathematics": ["Algebra", "Calculus", "Statistics", "Probability", "Commercial Arithmetic"],
        "English": ["Functional Writing", "Comprehension", "Grammar", "Literature", "Oral Skills"],
        "Kiswahili": ["Lugha", "Fasihi", "Insha", "Isimu Jamii"],
        "Biology": ["Genetics", "Evolution", "Ecology"],
        "Chemistry": ["Electrochemistry", "Organic Chemistry", "Metals and Non-Metals"],
        "Physics": ["Optics", "Modern Physics", "Electricity and Magnetism"],
        "Geography": ["Physical Geography", "Human Geography", "Fieldwork"],
        "History and Government": ["Kenyan History", "Government", "World History"],
        "Religious Education": ["Christian / Islamic / Hindu Ethics", "Contemporary Issues"],
        "Business Studies": ["Marketing", "Financial Accounts", "Entrepreneurship"],
        "Agriculture": ["Agricultural Economics", "Farm Management"],
        "Computer Studies": ["Programming", "Networking", "Emerging Trends"],
        "Home Science": ["Consumer Education", "Home Management"],
        "Art and Design": ["Sculpture", "Art History", "Graphic Design"],
        "Music": ["Composition", "Music History", "Performance"],
        "French": ["Literature", "Advanced Composition", "Oral Skills"],
        "German": ["Literature", "Advanced Composition", "Oral Skills"],
        "Arabic": ["Literature", "Advanced Composition", "Oral Skills"],
        "Hindi": ["Literature", "Advanced Composition", "Oral Skills"]
      }
    };

    const questionBank = {
      "Mathematics": {
        "Numbers": {
          "Form 1": [
            {
              question: "What is the place value of 7 in 5,743?",
              options: ["A) 7", "B) 70", "C) 700", "D) 7,000"],
              answer: "C"
            },
            {
              question: "Find the Lowest Common Multiple (LCM) of 12 and 18.",
              options: ["A) 6", "B) 12", "C) 18", "D) 36"],
              answer: "D"
            },
            {
              question: "Calculate $5 \times (3 + 2)$ using the order of operations (BODMAS/PEMDAS).",
              options: ["A) 13", "B) 25", "C) 17", "D) 10"],
              answer: "B"
            }
          ]
        },
        "Algebra": {
          "Form 1": [
            {
              question: "Simplify the expression: $2x + 3y - x + 5y$",
              options: ["A) $x + 8y$", "B) $3x + 8y$", "C) $x + 2y$", "D) $2x + 8y$"],
              answer: "A"
            },
            {
              question: "If $a = 3$ and $b = 4$, what is the value of $2a + b$?",
              options: ["A) 7", "B) 10", "C) 12", "D) 8"],
              answer: "B"
            },
            {
              question: "Solve for $y$: $4y - 6 = 10$",
              options: ["A) 2", "B) 4", "C) 6", "D) 8"],
              answer: "B"
            }
          ],
          "Form 2": [
            {
              question: "Solve for $x$: $2x + 5 = 11$",
              options: ["A) 3", "B) 4", "C) 5", "D) 6"],
              answer: "A"
            },
            {
              question: "Expand and simplify: $(x+3)(x-2)$",
              options: ["A) $x^2 + x - 6$", "B) $x^2 + 5x - 6$", "C) $x^2 - x + 6$", "D) $x^2 + 6$"],
              answer: "A"
            }
          ],
          "Form 3": [
            {
              question: "Factorize: $x^2 - 4$",
              options: ["A) $(x+2)(x-2)$", "B) $(x+4)(x-4)$", "C) $(x-2)^2$", "D) $(x+2)^2$"],
              answer: "A"
            },
            {
              question: "Solve the quadratic equation: $x^2 - 7x + 12 = 0$",
              options: ["A) $x=3,4$", "B) $x=2,6$", "C) $x=-3,-4$", "D) $x=1,12$"],
              answer: "A"
            }
          ],
          "Form 4": [
            {
              question: "Find the roots of $x^2 - 5x + 6 = 0$",
              options: ["A) $x=2,3$", "B) $x=1,6$", "C) $x=-2,-3$", "D) $x=5,6$"],
              answer: "A"
            },
            {
              question: "What is the discriminant of the quadratic equation $ax^2 + bx + c = 0$?",
              options: ["A) $b^2 - 4ac$", "B) $b - 4ac$", "C) $\sqrt{b^2 - 4ac}$", "D) $4ac - b^2$"],
              answer: "A"
            }
          ]
        },
      },
      "English": {
        "Grammar": {
          "Form 1": [
            {
              question: "Choose the correct sentence:",
              options: ["A) He is going to school.", "B) He is go to school.", "C) He are going to school.", "D) He going to school."],
              answer: "A"
            },
            {
              question: "Identify the plural of 'child'.",
              options: ["A) childs", "B) childrens", "C) children", "D) child's"],
              answer: "C"
            }
          ],
          "Form 2": [
            {
              question: "Identify the verb in: She runs fast.",
              options: ["A) She", "B) runs", "C) fast", "D) none"],
              answer: "B"
            },
            {
              question: "Which of the following is a pronoun?",
              options: ["A) table", "B) beautiful", "C) she", "D) quickly"],
              answer: "C"
            }
          ]
        },
      },
      "Kiswahili": {
        "Lugha": {
          "Form 2": [
            {
              question: "Chagua sentensi iliyo sahihi:",
              options: ["A) Wao walicheza mpira.", "B) Yeye alicheza mpira.", "C) Yeye walicheza mpira.", "D) Wao alicheza mpira."],
              answer: "A"
            },
            {
              question: "Tunga sentensi ukitumia nomino 'mwalimu'.",
              options: ["A) Mwalimu anasoma kitabu.", "B) Anapika chai mwalimu.", "C) Mzuri ni mwalimu.", "D) Wao ni mwalimu."],
              answer: "A"
            }
          ]
        },
      },
      "Physics": {
        "Mechanics": {
          "Form 1": [
            {
              question: "What is the SI unit of force?",
              options: ["A) Joule", "B) Newton", "C) Watt", "D) Meter"],
              answer: "B"
            },
            {
              question: "Which of the following is a vector quantity?",
              options: ["A) Mass", "B) Time", "C) Velocity", "D) Temperature"],
              answer: "C"
            }
          ]
        },
        "Kinematics": {
          "Form 4": [
            {
              question: "A car accelerates from rest at $2 m/s^2$. What is its velocity after 10 seconds?",
              options: ["A) $10 m/s$", "B) $20 m/s$", "C) $2 m/s$", "D) $12 m/s$"],
              answer: "B"
            },
            {
              question: "What is the formula for calculating distance covered under constant acceleration?",
              options: ["A) $v=u+at$", "B) $s=ut + \frac{1}{2}at^2$", "C) $v^2=u^2+2as$", "D) $s=vt$"],
              answer: "B"
            }
          ]
        },
      },
      "Chemistry": {
        "Structure of Matter": {
          "Form 1": [
            {
              question: "What is an atom?",
              options: ["A) Smallest particle of an element", "B) A compound", "C) A molecule", "D) A mixture"],
              answer: "A"
            },
            {
              question: "Which subatomic particle has a positive charge?",
              options: ["A) Electron", "B) Neutron", "C) Proton", "D) Nucleus"],
              answer: "C"
            }
          ]
        },
      },
      "Biology": {
        "Cell Biology": {
          "Form 1": [
            {
              question: "What is the function of the nucleus in a cell?",
              options: ["A) Energy production", "B) Controls cell activities", "C) Digestion", "D) Transport"],
              answer: "B"
            },
            {
              question: "Which organelle is responsible for photosynthesis in a plant cell?",
              options: ["A) Mitochondria", "B) Nucleus", "C) Ribosome", "D) Chloroplast"],
              answer: "D"
            }
          ]
        },
      },
      "Geography": {
        "Physical Geography": {
          "Form 1": [
            {
              question: "What is the longest river in Kenya?",
              options: ["A) Tana", "B) Athi", "C) Ewaso Ng'iro", "D) Nzoia"],
              answer: "A"
            },
            {
              question: "The process of a solid changing directly to a gas is called:",
              options: ["A) Evaporation", "B) Condensation", "C) Sublimation", "D) Precipitation"],
              answer: "C"
            }
          ]
        },
      },
      "History and Government": {
        "Kenyan History": {
          "Form 1": [
            {
              question: "Who was Kenya's first president?",
              options: ["A) Daniel Moi", "B) Jomo Kenyatta", "C) Mwai Kibaki", "D) Uhuru Kenyatta"],
              answer: "B"
            },
            {
              question: "The scramble for and partition of Africa by European powers occurred in the:",
              options: ["A) 17th Century", "B) 18th Century", "C) 19th Century", "D) 20th Century"],
              answer: "C"
            }
          ]
        },
      },
      "Religious Education": {
        "Beliefs and Values": {
          "Form 1": [
            {
              question: "What is the first book of the Bible?",
              options: ["A) Exodus", "B) Genesis", "C) Leviticus", "D) Matthew"],
              answer: "B"
            },
            {
              question: "Which prophet is associated with leading the Israelites out of Egypt?",
              options: ["A) Abraham", "B) Moses", "C) David", "D) Isaiah"],
              answer: "B"
            }
          ]
        },
      },
      "Business Studies": {
        "Entrepreneurship": {
          "Form 1": [
            {
              question: "What is an entrepreneur?",
              options: ["A) A government official", "B) A business innovator", "C) A teacher", "D) A farmer"],
              answer: "B"
            },
            {
              question: "Which of the following is not a characteristic of a good entrepreneur?",
              options: ["A) Risk-taker", "B) Creative", "C) Lazy", "D) Hardworking"],
              answer: "C"
            }
          ]
        },
      },
      "Agriculture": {
        "Crop Production": {
          "Form 1": [
            {
              question: "Which crop is a major cash crop in Kenya?",
              options: ["A) Maize", "B) Tea", "C) Cassava", "D) Millet"],
              answer: "B"
            },
            {
              question: "The process of preparing land for planting crops is called:",
              options: ["A) Harvesting", "B) Tillage", "C) Weeding", "D) Fertilizing"],
              answer: "B"
            }
          ]
        },
      },
      "Computer Studies": {
        "Introduction to Computers": {
          "Form 1": [
            {
              question: "What is the main function of the CPU?",
              options: ["A) Storage", "B) Processing", "C) Display", "D) Input"],
              answer: "B"
            },
            {
              question: "Which of the following is an input device?",
              options: ["A) Monitor", "B) Printer", "C) Keyboard", "D) Speaker"],
              answer: "C"
            }
          ]
        },
      },
      "Home Science": {
        "Nutrition and Dietetics": {
          "Form 1": [
            {
              question: "Which nutrient is the main source of energy?",
              options: ["A) Protein", "B) Carbohydrate", "C) Vitamin", "D) Mineral"],
              answer: "B"
            },
            {
              question: "A diet that contains all the essential nutrients in the right proportions is called a:",
              options: ["A) Balanced diet", "B) Vegetarian diet", "C) Fasting diet", "D) Liquid diet"],
              answer: "A"
            }
          ]
        },
      },
      "Art and Design": {
        "Drawing and Painting": {
          "Form 1": [
            {
              question: "What is a primary color?",
              options: ["A) Green", "B) Orange", "C) Red", "D) Purple"],
              answer: "C"
            },
            {
              question: "The art of creating images with pencils, charcoal, or pastels is known as:",
              options: ["A) Painting", "B) Sculpture", "C) Drawing", "D) Photography"],
              answer: "C"
            }
          ]
        },
      },
      "Music": {
        "Music Theory": {
          "Form 1": [
            {
              question: "What is the first note of a C major scale?",
              options: ["A) D", "B) C", "C) E", "D) G"],
              answer: "B"
            },
            {
              question: "The lines and spaces on which musical notes are written are called a:",
              options: ["A) Staff", "B) Chord", "C) Scale", "D) Rhythm"],
              answer: "A"
            }
          ]
        },
      },
      "French": {
        "Basic Vocabulary": {
          "Form 1": [
            {
              question: "What is the French word for 'hello'?",
              options: ["A) Bonjour", "B) Merci", "C) Au revoir", "D) S'il vous plaÃ®t"],
              answer: "A"
            },
            {
              question: "How do you say 'thank you' in French?",
              options: ["A) De rien", "B) Pardon", "C) Excusez-moi", "D) Merci"],
              answer: "D"
            }
          ]
        },
      },
      "German": {
        "Basic Vocabulary": {
          "Form 1": [
            {
              question: "What is the German word for 'good morning'?",
              options: ["A) Guten Abend", "B) Guten Morgen", "C) Guten Tag", "D) Auf Wiedersehen"],
              answer: "B"
            },
            {
              question: "How do you say 'please' in German?",
              options: ["A) Entschuldigung", "B) Danke", "C) Bitte", "D) TschÃ¼ss"],
              answer: "C"
            }
          ]
        },
      },
      "Arabic": {
        "Basic Vocabulary": {
          "Form 1": [
            {
              question: "What is the Arabic word for 'peace'?",
              options: ["A) Salaam", "B) Shukran", "C) Marhaba", "D) Ma'a Salaama"],
              answer: "A"
            },
            {
              question: "How do you say 'hello' in Arabic?",
              options: ["A) Ahlan", "B) Na'am", "C) La", "D) Kayfa haluk"],
              answer: "A"
            }
          ]
        },
      },
      "Hindi": {
        "Basic Vocabulary": {
          "Form 1": [
            {
              question: "What is the Hindi word for 'hello'?",
              options: ["A) Namaste", "B) Dhanyavaad", "C) Alvida", "D) Shubh"],
              answer: "A"
            },
            {
              question: "How do you say 'thank you' in Hindi?",
              options: ["A) Aap", "B) Dhanyavaad", "C) Tum", "D) Mai"],
              answer: "B"
            }
          ]
        },
      }
    };

    document.addEventListener("DOMContentLoaded", () => {
      const formSelect = document.getElementById("formSelect");
      const subjectSelect = document.getElementById("subjectSelect");
      const topicSelect = document.getElementById("topicSelect");
      const topicsDiv = document.getElementById("topics");
      const generateBtn = document.getElementById("generate-btn");
      const printBtn = document.getElementById("print-btn");
      const toggleAnswerKeyBtn = document.getElementById("toggle-answer-key");
      const examContainer = document.getElementById("exam-container");

      function updateSubjects() {
        const selectedForm = formSelect.value;
        if (!selectedForm) {
          subjectSelect.innerHTML = '<option value="" disabled selected>Select Subject</option>';
          topicSelect.innerHTML = '<option value="" disabled selected>Select Topic</option>';
          topicsDiv.innerHTML = '';
          return;
        }

        const subjects = Object.keys(syllabus[selectedForm]);
        subjectSelect.innerHTML = '<option value="" disabled selected>Select Subject</option>';
        subjects.forEach(subject => {
          const option = document.createElement("option");
          option.value = subject;
          option.textContent = subject;
          subjectSelect.appendChild(option);
        });
        updateTopics();
      }

      function updateTopics() {
        const selectedForm = formSelect.value;
        const selectedSubject = subjectSelect.value;
        topicSelect.innerHTML = '<option value="" disabled selected>Select Topic</option>';
        topicsDiv.innerHTML = '';

        if (selectedSubject && syllabus[selectedForm] && syllabus[selectedForm][selectedSubject]) {
          const topics = syllabus[selectedForm][selectedSubject];
          topics.forEach(topic => {
            const option = document.createElement("option");
            option.value = topic;
            option.textContent = topic;
            topicSelect.appendChild(option);
          });
          topicsDiv.innerHTML = `<strong>Topics for ${selectedSubject}:</strong><ul>${topics.map(t => `<li>${t}</li>`).join("")}</ul>`;
        }
      }

      function generateExam() {
        examContainer.innerHTML = "";
        const form = formSelect.value;
        const subject = subjectSelect.value;
        const topic = topicSelect.value;
        const numQuestions = parseInt(document.getElementById("num-questions").value, 10);

        if (!form) {
          examContainer.innerHTML = `<p class="error-message">Please select a Form.</p>`;
          return;
        }
        if (!subject) {
          examContainer.innerHTML = `<p class="error-message">Please select a Subject.</p>`;
          return;
        }
        if (!topic) {
          examContainer.innerHTML = `<p class="error-message">Please select a Topic.</p>`;
          return;
        }
        if (isNaN(numQuestions) || numQuestions <= 0 || numQuestions > 100) {
          examContainer.innerHTML = `<p class="error-message">Please enter a valid number of questions (1-100).</p>`;
          return;
        }

        const formNumber = form.replace("form", "Form ");
        const subjectQuestions = questionBank[subject]?.[topic]?.[formNumber];

        if (!subjectQuestions || subjectQuestions.length === 0) {
          examContainer.innerHTML = `<p class="error-message">No questions available for this selection. Please try a different combination.</p>`;
          return;
        }

        const finalQuestions = subjectQuestions.sort(() => 0.5 - Math.random()).slice(0, Math.min(numQuestions, subjectQuestions.length));

        const examDocument = document.createElement("div");
        examDocument.classList.add("exam-document");

        const examHeader = document.createElement("div");
        examHeader.classList.add("exam-header");
        examHeader.innerHTML = `
          <h2>${subject} Exam</h2>
          <p><strong>Topic:</strong> ${topic} | <strong>Form:</strong> ${formNumber} | <strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
        `;
        examDocument.appendChild(examHeader);

        const answers = [];

        finalQuestions.forEach((q, index) => {
          const questionElement = document.createElement("div");
          questionElement.classList.add("question");

          const optionsHTML = q.options.map(opt => `<label><input type="radio" disabled> ${opt}</label><br>`).join('');

          questionElement.innerHTML = `
            <p><strong>Question ${index + 1}:</strong> ${q.question}</p>
            <div class="options">${optionsHTML}</div>
          `;

          examDocument.appendChild(questionElement);
          answers.push(`Q${index + 1}: ${q.answer}`);
        });

        const answerKeyDiv = document.createElement("div");
        answerKeyDiv.classList.add("answer-key");
        answerKeyDiv.setAttribute("id", "answer-key");
        answerKeyDiv.innerHTML = `
          <h3>Answer Key</h3>
          <ol>${answers.map(a => `<li>${a}</li>`).join("")}</ol>
        `;
        answerKeyDiv.style.display = "none";

        examDocument.appendChild(answerKeyDiv);
        examContainer.appendChild(examDocument);
      }

      formSelect.addEventListener("change", updateSubjects);
      subjectSelect.addEventListener("change", updateTopics);
      generateBtn.addEventListener("click", generateExam);
      printBtn.addEventListener("click", () => window.print());
      toggleAnswerKeyBtn.addEventListener("click", () => {
        const key = document.getElementById("answer-key");
        if (key) {
          const isHidden = key.style.display === "none";
          key.style.display = isHidden ? "block" : "none";
          toggleAnswerKeyBtn.textContent = isHidden ? "Hide Answer Key" : "Show Answer Key";
        }
      });

      // Initial load
      updateSubjects();
    });
  </script>
</body>
</html>
